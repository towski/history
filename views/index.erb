<script type="text/javascript">
$().ready(function() {
  setFacebookPic = function(id){
    FB.XFBML.Host.addElement(new FB.XFBML.ProfilePic($("#pic"+id)[0])); 
  };
  formatItem = function(data, i, n, value) {
    setTimeout('setFacebookPic('+data[1]+');', 10);
    return '<div style="clear:right" id="item'+data[1]+'">'+value+'<div id="pic'+data[1]+'" uid="'+data[1]+'" size="square" style="float:right"></div></div>'
  };
  onClick = function(e, item) {
    $('#item'+item[1]).insertAfter('#users');
    var history = new History(item[1])
    history.run()
    $("#imageSearch").attr("value", "");
  }
  $("#friends").autocomplete("friends", {
    width: 320,
    max: 4,
    highlight: false,
    scroll: true,
    scrollHeight: 300,
    formatItem: formatItem,
    formatResult: function(data, value) {
      return value.split(".")[0];
    }
  }).result(onClick);
});
</script>
<p>
  <label>Search for friends:</label>
  <input type="text" id='friends' />
</p>
<div id='users'></div>
<ul id='history'></ul>
